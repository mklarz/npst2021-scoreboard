<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- https://github.com/mklarz/npst2021-scoreboard -->
<title>NPST2021 - Scoreboard</title>
<style>
html, body {
  margin: 0;
  background: #100C2A;
}
#chart {
  width: 100%;
  height: 80vh;
  padding-top: 20px;
}
</style>
</head>
<body>
<div id="chart"></div>
<script src="./static/echarts-5.2.2.min.js" integrity="sha512-ivdGNkeO+FTZH5ZoVC4gS4ovGSiWc+6v60/hvHkccaMN2BXchfKdvEZtviy5L4xSpF8NPsfS0EVNSGf+EsUdxA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="./static/jquery-3.6.0.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="./static/theme.js" integirty="sha512-e5yUjHlsMcLwsXP8QBpfUofcbF3vG5oEbSiqvkTM/ShCzG7R9+HWBmQhI22nBXIq" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
function addData(series) {
  var chart = echarts.init(document.getElementById('chart'), 'dark');
  chart.setOption({
    title: {
      left: 'center',
        text: `NPST2021 - Top ${series.users.length} Users`
    },
    tooltip: {
      order: 'valueDesc',
      trigger: 'axis'
    },
    toolbox: {
      feature: {
        saveAsImage: {}
      }
    },
    legend: {
      bottom: 0,
      show: true,
      tooltip: {
        show: true,
        formatter: function(params) {
          var user = series.users.find(user => user.name == params.name);
          var last = user.data[user.data.length - 1][0]
          return `<b>${params.name}</b><br>${last}`;
        }
      }
    },
    xAxis: {
      type: 'time',
    },
    yAxis: {
      type: 'value',
      name: 'score'
    },
    series: series.users
  });
}
document.addEventListener('DOMContentLoaded', function () {
  $.getJSON("./series.json", addData);
});
</script>
</body>
</html>
